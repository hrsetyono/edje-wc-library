!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([,,,function(e,t,o){"use strict";o.r(t);o(4);const i=jQuery,n={init(){const e=document.querySelector("#product-type");e&&(this.addTypeClass(e),e.addEventListener("change",e=>{this.addTypeClass(e.currentTarget)}))},addTypeClass(e){const t=e.value,o=document.querySelector("body");if(!o)return;const i=new RegExp(/is-product-type-\w+/,"g");o.className.match(i)?o.className=o.className.replace(i,"is-product-type-"+t):o.classList.add("is-product-type-"+t)}},r={init(){this.onAdded(),this.onSaved(),this.moveFields()},onAdded(){i("body").on("woocommerce_added_attribute",()=>{[...document.querySelectorAll('#product_attributes [name*="attribute_variation["]')].forEach(e=>{e.checked=!0,e.dispatchEvent(new Event("change")),this.moveField(e.closest(".wc-metabox"))})})},onSaved(){i("#variable_product_options").on("reload",()=>{this.moveFields()})},moveFields(){[...document.querySelectorAll("#product_attributes .wc-metabox")].forEach(e=>{this.moveField(e)})},moveField(e){const t=e.querySelector("h3");if(!e.classList.contains("taxonomy")){const o=e.querySelector("td.attribute_name");o&&t.append(...o.childNodes)}const o=e.querySelector('td[rowspan="3"]');o&&t.append(...o.childNodes)}},a={init(){this.changeNoticeButton(),this.initSetPrice(),this.initSetSalePrice(),this.initSetStock(),this.initCreateVariations(),i("#woocommerce-product-data").on("woocommerce_variations_loaded",()=>{console.log("loaded"),this.moveActionSelect(),this.renderToolbarButtons()})},moveActionSelect(){if(document.querySelector(".toolbar-variations-defaults .variation_actions"))return;const e=document.querySelector(".variation_actions"),t=document.querySelector(".do_variation_action"),o=document.querySelector(".toolbar-variations-defaults");e&&o&&(o.appendChild(e),o.appendChild(t))},renderToolbarButtons(){const e=document.querySelector("#variable_product_options .toolbar-top");if(!e)return;if(e.querySelector(".h-variation-buttons"))return;const t=document.querySelector("#h-variation-buttons");t&&(e.innerHTML+=t.innerHTML)},changeNoticeButton(){i("#variable_product_options").on("click","#variable_product_options_inner > .woocommerce-message a",(function(e){e.preventDefault();document.querySelector(".wc-tabs .attribute_tab a").dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}))},initSetPrice(){i("#variable_product_options").on("click",'.button[data-action="set-price"]',function(){this.doAction("variable_regular_price")}.bind(this))},initSetSalePrice(){i("#variable_product_options").on("click",'.button[data-action="set-sale-price"]',function(){const e=prompt("Enter the discounted price (leave empty to remove sale)");if(null===e)return;this.fillFields('input[name*="variable_sale_price"]',e)}.bind(this))},initSetStock(){i("#variable_product_options").on("click",'.button[data-action="set-stock"]',function(){const e=prompt("Enter stock amount (leave empty if not managing stock)");if(null===e)return;const t=""!==e;if(this.tickCheckboxes('[name*="variable_manage_stock"]',t),""===e)return;this.fillFields('[name*="variable_stock"]',e)}.bind(this))},initCreateVariations(){i("#variable_product_options").on("click",'.button[data-action="create-variations"]',function(){this.doAction("link_all_variations")}.bind(this))},doAction(e){const t=document.querySelector("#variable_product_options #field_to_edit"),o=document.querySelector("#variable_product_options .do_variation_action");t.value=e,o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))},fillFields(e,t){[...document.querySelectorAll(e)].forEach(e=>{e.value=t,i(e).trigger("change")})},tickCheckboxes(e,t){[...document.querySelectorAll(e)].forEach(e=>{e.checked=t,i(e).trigger("change")})}},c={init(){i("#woocommerce-product-data").on("woocommerce_variations_loaded",this.render),i("#woocommerce-product-data").on("woocommerce_variations_added",this.render);[{field:'[name*="regular_price["]',overview:'[data-info="price"]'},{field:'[name*="sale_price["]',overview:'[data-info="sale-price"]'},{field:'[name*="variable_stock["]',overview:'[data-info="stock"]'}].forEach(e=>{i("#variable_product_options").on("change",e.field,t=>{this._updateOverview(t.currentTarget,e.overview)}),i("#woocommerce-product-data").on("woocommerce_variations_loaded",()=>{[...document.querySelectorAll(e.field)].forEach(t=>{this._updateOverview(t,e.overview)})})}),i("#variable_product_options").on("change",'[name*="variable_manage_stock["]',e=>{e.currentTarget.checked||this._updateOverview(e.currentTarget,'[data-info="stock"]')})},render(){const e=document.querySelectorAll("#variable_product_options .wc-metabox h3"),t=document.querySelector("#h-variation-overview").innerHTML;[...e].forEach(e=>{e.innerHTML.match(/h-variation-overview/)||(e.innerHTML+=t)})},_updateOverview(e,t){const o=e.closest(".wc-metabox").querySelector(".h-variation-overview");if(!o)return;const i=o.querySelector(t);e.value>0?i.classList.remove("hidden"):i.classList.add("hidden"),i.querySelector("span").textContent=e.value}};document.addEventListener("DOMContentLoaded",(function(){n.init(),r.init(),a.init(),c.init()})),window.addEventListener("load",(function(){}))},function(e,t,o){}]);